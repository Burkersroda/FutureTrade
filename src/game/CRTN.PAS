UNIT crtn;

INTERFACE USES DOS,SPX_CLK;

CONST CHECKBREAK:BOOLEAN=TRUE;
FUNCTION KEYPRESSED:BOOLEAN;
FUNCTION READKEY:WORD;
PROCEDURE DELAY(length:LONGINT);

IMPLEMENTATION

FUNCTION KEYPRESSED:BOOLEAN;
VAR regs0:REGISTERS;
BEGIN
  regs0.ah:=$11;
  INTR($16,regs0);
  IF regs0.flags AND 64=64 THEN KEYPRESSED:=FALSE ELSE KEYPRESSED:=TRUE;
END;
FUNCTION READKEY:WORD;
VAR regs0:REGISTERS;
BEGIN
  regs0.ah:=$10;
  INTR($16,regs0);
  READKEY:=regs0.ax;
END;
PROCEDURE DELAY(length:LONGINT);
VAR ft:LONGINT;
BEGIN
  length:=length*5;
  ft:=GETCLOCK;
  REPEAT UNTIL GETCLOCK-ft>=length;
END;

END.
